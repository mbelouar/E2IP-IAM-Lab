<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - SecureAuth</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='grad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='%230066cc'/><stop offset='100%' stop-color='%233385d6'/></linearGradient></defs><rect width='100' height='100' rx='20' fill='url(%23grad)'/><path d='M50 25c-8.284 0-15 6.716-15 15v5h-5c-2.761 0-5 2.239-5 5v25c0 2.761 2.239 5 5 5h40c2.761 0 5-2.239 5-5V50c0-2.761-2.239-5-5-5h-5v-5c0-8.284-6.716-15-15-15zm0 6c5.523 0 10 4.477 10 10v5H40v-5c0-5.523 4.477-10 10-10z' fill='white'/></g></svg>">
    
    {% load static %}
    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/login.css' %}?v=3">
    <link rel="stylesheet" href="{% static 'css/login-enhancements.css' %}?v=2">
    <link rel="stylesheet" href="{% static 'css/background-enhancements.css' %}?v=2">
    <link rel="stylesheet" href="{% static 'css/header-enhancements.css' %}?v=2">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* Global Styles - Match app design */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 50%, #cbd5e1 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #1e293b;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #0a0e1a 0%, #1a202c 50%, #0f172a 100%);
            color: #f7fafc;
        }

        /* Enhanced Background Elements */
        .background-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 0;
        }

        .background-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.03;
            background-image: 
                linear-gradient(90deg, rgba(255, 255, 255, 0.15) 1px, transparent 1px),
                linear-gradient(0deg, rgba(255, 255, 255, 0.15) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridShimmer 8s ease-in-out infinite;
        }

        .background-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(0, 0, 0, 0.02) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(0, 0, 0, 0.02) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.01) 0%, transparent 70%);
            opacity: 0.3;
            animation: backgroundPulse 15s ease-in-out infinite;
        }

        .floating-elements {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .floating-element {
            position: absolute;
            border-radius: 50%;
            filter: blur(2px);
            animation: float 12s ease-in-out infinite;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .floating-element:nth-child(1) {
            width: 200px;
            height: 200px;
            left: 10%;
            top: 10%;
            animation-delay: 0s;
        }

        .floating-element:nth-child(2) {
            width: 150px;
            height: 150px;
            left: 85%;
            top: 15%;
            animation-delay: 3s;
        }

        .floating-element:nth-child(3) {
            width: 180px;
            height: 180px;
            left: 70%;
            top: 70%;
            animation-delay: 6s;
        }

        .floating-element:nth-child(4) {
            width: 120px;
            height: 120px;
            left: 20%;
            top: 80%;
            animation-delay: 9s;
        }

        .circuit-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.07;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 10 L90 10 M10 30 L30 30 L30 90 M70 30 L90 30 M50 10 L50 90 M70 50 L90 50 M10 70 L30 70 M70 70 L90 70 M10 90 L90 90' stroke='white' stroke-width='1.2' fill='none' /%3E%3Ccircle cx='30' cy='30' r='2' fill='white'/%3E%3Ccircle cx='70' cy='30' r='2' fill='white'/%3E%3Ccircle cx='30' cy='70' r='2' fill='white'/%3E%3Ccircle cx='70' cy='70' r='2' fill='white'/%3E%3C/svg%3E");
            background-size: 200px 200px;
            animation: circuitPulse 10s ease-in-out infinite;
        }

        @keyframes gridShimmer {
            0%, 100% { opacity: 0.03; }
            50% { opacity: 0.05; }
        }

        @keyframes backgroundPulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.2; }
        }

        @keyframes float {
            0% { 
                transform: translateY(0) translateX(0) rotate(0deg);
                opacity: 0.6;
            }
            25% {
                transform: translateY(-30px) translateX(20px) rotate(90deg);
                opacity: 0.8;
            }
            50% { 
                transform: translateY(-60px) translateX(0px) rotate(180deg);
                opacity: 0.6;
            }
            75% {
                transform: translateY(-30px) translateX(-20px) rotate(270deg);
                opacity: 0.8;
            }
            100% { 
                transform: translateY(0) translateX(0) rotate(360deg);
                opacity: 0.6;
            }
        }

        @keyframes circuitPulse {
            0%, 100% { opacity: 0.07; }
            50% { opacity: 0.04; }
        }

        /* Header */
        .header {
            position: relative;
            z-index: 50;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header-logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
            color: inherit;
        }

        .header-logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #0066cc, #4285f4);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.25rem;
            font-weight: bold;
        }

        .company-info {
            color: white;
        }

        .company-name {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 0.125rem;
            letter-spacing: -0.025em;
            background: linear-gradient(135deg, #0066cc, #4285f4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .company-tagline {
            font-size: 0.875rem;
            opacity: 0.9;
            font-weight: 500;
            letter-spacing: 0.01em;
        }

        .system-status {
            display: flex !important;
            align-items: center !important;
            gap: 0.5rem !important;
            background: rgba(30, 41, 59, 0.5) !important;
            backdrop-filter: blur(12px) !important;
            padding: 0.75rem 1.25rem !important;
            border-radius: 1rem !important;
            color: #e2e8f0 !important;
            font-size: 0.875rem !important;
            font-weight: 500 !important;
            border: 1px solid rgba(100, 116, 139, 0.3) !important;
            min-height: 2.5rem !important;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00a86b;
            animation: pulse 2s infinite;
        }

        .utility-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .utility-btn {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(100, 116, 139, 0.3);
            border-radius: 0.75rem;
            padding: 0.75rem;
            color: #e2e8f0;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .utility-btn:hover {
            background: rgba(30, 41, 59, 0.7);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .utility-btn:focus {
            outline: 2px solid rgba(255, 255, 255, 0.5);
            outline-offset: 2px;
        }

        /* Main Container */
        .password-reset-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem 1rem;
            position: relative;
            z-index: 10;
        }

        .password-reset-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(24px);
            border-radius: 1.5rem;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.2);
            padding: 2.5rem;
            width: 100%;
            max-width: 450px;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.4);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: cardEntrance 0.6s ease-out forwards;
        }

        .password-reset-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.3);
        }

        body.dark-mode .password-reset-card {
            background: rgba(26, 32, 44, 0.85);
            border: 1px solid rgba(100, 116, 139, 0.3);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.05);
        }

        .password-reset-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #0066cc, #4285f4, #0066cc);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes cardEntrance {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes shimmer {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .password-reset-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .password-reset-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #0066cc, #4285f4);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.75rem;
            margin: 0 auto 1rem;
            box-shadow: 0 8px 25px rgba(0, 102, 204, 0.3);
        }

        .password-reset-title {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #0066cc, #4285f4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .password-reset-subtitle {
            font-size: 1rem;
            color: #94a3b8;
            margin-bottom: 0;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            color: #1e293b;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        body.dark-mode .form-label {
            color: #f7fafc;
        }

        .form-input {
            width: 100%;
            padding: 1rem 1.25rem;
            background-color: #f1f5f9;
            border: 2px solid transparent;
            border-radius: 0.75rem;
            font-size: 1rem;
            color: #1e293b;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .form-input:focus {
            background-color: #ffffff;
            border-color: #0066cc;
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.15);
        }

        body.dark-mode .form-input {
            background-color: #1a1f2e;
            color: #f7fafc;
            border: 2px solid #2d3748;
        }

        body.dark-mode .form-input:focus {
            background-color: #252b3d;
            border-color: #0066cc;
        }

        .btn-reset {
            width: 100%;
            background: linear-gradient(135deg, #0066cc, #4285f4);
            color: white;
            border: none;
            border-radius: 1rem;
            padding: 1rem 2rem;
            font-size: 1.125rem;
            font-weight: 600;
            letter-spacing: 0.01em;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 102, 204, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .btn-reset::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-reset:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 102, 204, 0.4);
        }

        .btn-reset:hover::before {
            left: 100%;
        }

        .btn-reset:active {
            transform: translateY(-1px);
        }

        .back-to-login {
            text-align: center;
            margin-top: 2rem;
        }

        .back-to-login-link {
            color: #3b82f6;
            text-decoration: none;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: color 0.3s ease;
        }

        .back-to-login-link:hover {
            color: #60a5fa;
        }

        /* Enhanced Messages */
        .alert {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1.25rem 1.5rem;
            border-radius: 12px;
            border: 1px solid;
            margin-bottom: 1rem;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .alert:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .alert-icon {
            font-size: 1.25rem;
            margin-top: 0.25rem;
            flex-shrink: 0;
            line-height: 1;
        }

        .alert-content {
            font-size: 0.95rem;
            line-height: 1.5;
            font-weight: 500;
            margin-top: 0;
        }

        .alert-error {
            background: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.3);
            color: #dc2626;
        }

        .alert-error .alert-icon {
            color: #ef4444;
        }

        .alert-success {
            background: rgba(16, 185, 129, 0.1);
            border-color: rgba(16, 185, 129, 0.3);
            color: #047857;
        }

        .alert-success .alert-icon {
            color: #10b981;
        }

        .alert-info {
            background: rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
            color: #2563eb;
        }

        .alert-info .alert-icon {
            color: #3b82f6;
        }

        body.dark-mode .alert-error {
            background: rgba(239, 68, 68, 0.15);
            color: #f87171;
        }

        body.dark-mode .alert-success {
            background: rgba(16, 185, 129, 0.15);
            color: #34d399;
        }

        body.dark-mode .alert-info {
            background: rgba(59, 130, 246, 0.15);
            color: #60a5fa;
        }

        /* Enhanced Footer */
        .footer {
            position: relative;
            z-index: 10;
            padding: 1rem 2rem;
            background: rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            margin-top: auto;
        }

        body.dark-mode .footer {
            background: rgba(0, 0, 0, 0.25);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.875rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .password-reset-container {
                padding: 1rem;
            }
            
            .password-reset-card {
                padding: 2rem;
            }
            
            .password-reset-title {
                font-size: 1.75rem;
            }

            .header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .header-left {
                flex-direction: column;
                gap: 1rem;
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.05); }
        }
    </style>
</head>
<body>
    <!-- Enhanced Background -->
    <div class="background-wrapper">
        <div class="background-grid"></div>
        <div class="background-overlay"></div>
        <div class="circuit-lines"></div>
        <div class="floating-elements">
            <div class="floating-element"></div>
            <div class="floating-element"></div>
            <div class="floating-element"></div>
            <div class="floating-element"></div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <a href="{% url 'authentication:auth_choice' %}" class="header-logo">
                <div class="header-logo-icon">S</div>
                <div class="company-info">
                    <div class="company-name">SecureAuth</div>
                    <div class="company-tagline">Enterprise Access Portal</div>
                </div>
            </a>
            <div class="system-status">
                <div class="status-indicator"></div>
                <span>All systems operational</span>
            </div>
        </div>
        <div class="utility-controls">
            <button id="themeToggle" class="utility-btn" aria-label="Toggle dark mode">
                <i class="fas fa-moon"></i>
            </button>
            <button id="helpBtn" class="utility-btn" aria-label="Get help">
                <i class="fas fa-question-circle"></i>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <div class="password-reset-container">
        <div class="password-reset-card">
            <div class="password-reset-header">
                <div class="password-reset-icon">
                    <i class="fas fa-key"></i>
                </div>
                <h1 class="password-reset-title">Reset Password</h1>
                <p class="password-reset-subtitle">Enter your email to receive reset instructions</p>
            </div>

            <!-- Enhanced Messages -->
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">
                        <div class="alert-icon">
                            <i class="fas fa-{% if message.tags == 'success' %}check-circle{% elif message.tags == 'error' %}exclamation-circle{% elif message.tags == 'warning' %}exclamation-triangle{% else %}info-circle{% endif %}"></i>
                        </div>
                        <div class="alert-content">
                            {{ message }}
                        </div>
                    </div>
                {% endfor %}
            {% endif %}

            <form method="post">
                {% csrf_token %}
                
                <div class="form-group">
                    <label for="email" class="form-label">Email Address</label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        class="form-input" 
                        placeholder="Enter your email address"
                        required
                        autocomplete="email"
                    >
                </div>

                <button type="submit" class="btn-reset">
                    <i class="fas fa-paper-plane"></i>
                    <span>Send Reset Instructions</span>
                </button>
            </form>

            <div class="back-to-login">
                <a href="{% url 'authentication:standard_login' %}" class="back-to-login-link">
                    <i class="fas fa-arrow-left"></i>
                    <span>Back to Login</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 SecureAuth. All rights reserved.</p>
            <div class="footer-links">
                <a href="#" class="footer-link">Privacy Policy</a>
                <a href="#" class="footer-link">Terms of Service</a>
                <a href="#" class="footer-link">Contact Support</a>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Theme Toggle Functionality
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        
        // Check for saved theme preference or default to light mode
        const currentTheme = localStorage.getItem('theme') || 'light';
        body.classList.toggle('dark-mode', currentTheme === 'dark');
        updateThemeToggle();
        
        themeToggle.addEventListener('click', function() {
            body.classList.toggle('dark-mode');
            const isDarkMode = body.classList.contains('dark-mode');
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
            updateThemeToggle();
        });
        
        function updateThemeToggle() {
            const isDarkMode = body.classList.contains('dark-mode');
            const icon = themeToggle.querySelector('i');
            
            if (isDarkMode) {
                icon.className = 'fas fa-sun';
            } else {
                icon.className = 'fas fa-moon';
            }
        }

        // Add smooth animations on page load
        window.addEventListener('load', function() {
            const card = document.querySelector('.password-reset-card');
            const inputs = document.querySelectorAll('.form-input');
            
            // Animate card entrance
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';
            card.style.transition = 'all 0.6s ease';
            
            setTimeout(() => {
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, 100);
            
            // Animate inputs with stagger
            inputs.forEach((input, index) => {
                input.style.opacity = '0';
                input.style.transform = 'translateY(20px)';
                input.style.transition = 'all 0.4s ease';
                
                setTimeout(() => {
                    input.style.opacity = '1';
                    input.style.transform = 'translateY(0)';
                }, 200 + (index * 100));
            });
        });

        // Form validation
        document.querySelector('form').addEventListener('submit', function(e) {
            const email = document.getElementById('email').value.trim();
            
            if (!email) {
                e.preventDefault();
                alert('Please enter your email address.');
                return false;
            }
            
            // Basic email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                e.preventDefault();
                alert('Please enter a valid email address.');
                return false;
            }
        });
    </script>
    <script src="{% static 'js/footer.js' %}"></script>
</body>
</html>
