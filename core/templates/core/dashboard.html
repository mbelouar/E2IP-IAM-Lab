{% extends 'core/base.html' %}
{% load static %}

{% block title %}User Dashboard | ADFS Authentication{% endblock %}

{% block meta_description %}User dashboard showing ADFS authentication details and user information{% endblock %}
{% block content %}
<div class="container">
    <header>
        <h1>User Dashboard</h1>
        <a href="{% url 'logout_view' %}" class="btn btn-danger">Logout</a>
    </header>
        
        <div class="user-info">
            <h2>Welcome, {{ first_name }} {{ last_name }}!</h2>
            <div class="card">
                <p><strong>Username:</strong> {{ username }}</p>
                <p><strong>Email:</strong> {{ email }}</p>
            </div>
        </div>
        
        {% if groups %}
        <div class="groups">
            <h2>Your AD Groups</h2>
            <div class="card">
                {% for group in groups %}
                    <span class="group-tag">{{ group }}</span>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        
        <div class="attributes">
            <h2>All SAML Attributes</h2>
            <table>
                <tr>
                    <th>Attribute</th>
                    <th>Value</th>
                </tr>
                {% for key, value in attributes.items %}
                <tr>
                    <td>{{ key }}</td>
                    <td>{{ value }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
{% endblock %}

{% block extra_scripts %}
<script>
    // Additional dashboard-specific JavaScript can be added here
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Dashboard loaded successfully');
        
        // Add timestamp to show session activity
        const timestampElement = document.createElement('div');
        timestampElement.className = 'timestamp';
        timestampElement.textContent = 'Last activity: ' + new Date().toLocaleTimeString();
        document.querySelector('.container').appendChild(timestampElement);
        
        // Update timestamp every minute to show active session
        setInterval(function() {
            document.querySelector('.timestamp').textContent = 'Last activity: ' + new Date().toLocaleTimeString();
        }, 60000);
    });
</script>
{% endblock %}
